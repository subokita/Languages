"use strict";var a=Object.defineProperty;var g=Object.getOwnPropertyDescriptor;var h=Object.getOwnPropertyNames;var u=Object.prototype.hasOwnProperty;var P=(o,e)=>{for(var i in e)a(o,i,{get:e[i],enumerable:!0})},k=(o,e,i,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let t of h(e))!u.call(o,t)&&t!==i&&a(o,t,{get:()=>e[t],enumerable:!(r=g(e,t))||r.enumerable});return o};var p=o=>k(a({},"__esModule",{value:!0}),o);var v={};P(v,{default:()=>c});module.exports=p(v);var f=require("@codemirror/language"),m=require("@codemirror/state"),n=require("@codemirror/view"),s=require("obsidian"),D=n.ViewPlugin.fromClass(class{decorations;constructor(o){this.decorations=this.buildDecorations(o)}update(o){o.view.composing||o.view.plugin(s.livePreviewState)?.mousedown?this.decorations=this.decorations.map(o.changes):(o.selectionSet||o.viewportChanged)&&(this.decorations=this.buildDecorations(o.view))}buildDecorations(o){let e=new m.RangeSetBuilder;for(let{from:i,to:r}of o.visibleRanges)(0,f.syntaxTree)(o.state).iterate({from:i,to:r,enter:t=>{if(t.name.contains("hmd-internal-link")){let w=t.from-2,x=t.to+3;for(let d of o.state.selection.ranges)if(w<=d.to&&d.from<x)return;let l=o.state.sliceDoc(t.from,t.to).lastIndexOf("#");if(l<0)return;e.add(t.from,t.from+l+1,n.Decoration.replace({}))}}});return e.finish()}},{decorations:o=>o.decorations}),E=o=>{let e=o.querySelectorAll("a.internal-link");for(let i of e){let r=i.innerText.lastIndexOf(">");r<0||(i.innerText=i.innerText.substring(r+2))}},c=class extends s.Plugin{async onload(){this.registerEditorExtension(D),this.registerMarkdownPostProcessor(E)}};0&&(module.exports={});
